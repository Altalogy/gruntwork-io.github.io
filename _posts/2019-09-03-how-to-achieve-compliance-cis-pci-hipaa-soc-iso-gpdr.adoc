[[how_to_achieve_compliance_aws]]
= How to achieve compliance (CIS, PCI, HIPAA, SOC 2, ISO, GDPR, etc) on AWS and GCP
:type: guide
:description: Learn how to configure AWS and GCP to meet compliance requirements such as CIS, PCI, HIPAA, SOC 2, ISO, GDPR, etc.
// TODO: update image!
:image: ../assets/img/guides/service-catalog/grunty-blocks.png
:tags: aws, gcp, compliance, cis, pci, hipaa, soc, iso, gdpr, security
:toc:
:toc-placement!:

// GitHub specific settings. See https://gist.github.com/dcode/0cfbf2699a1fe9b46ff04c41721dda74 for details.
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

toc::[]

== Intro

This guide will walk you through the process of configuring AWS and GCP to meet compliance requirements such as CIS,
PCI, HIPAA, SOC 2, ISO, GDPR, etc.

=== What are compliance requirements?

Your company may be subject to _compliance requirements_, which consist of the laws, regulations, and guidelines that
you must follow to legally, ethically, and safely do business with certain companies, industries, and countries. Here
are some of the most common compliance requirements you're likely to run into that will affect the way you run
software in AWS and GCP:

CIS::
  The https://www.cisecurity.org[Center for Internet Security (CIS)] publishes a collection of
  https://www.cisecurity.org/cis-benchmarks/[benchmarks] that define standards and best practices for securing software
  systems against attacks. There are benchmarks for most clouds (AWS, GCP, Azure), operating systems (most flavors of
  Linux and Windows), and popular server software (MySQL, PostgreSQL, Kubernetes, etc), as well as tools that can
  automatically check compliance against these benchmarks. Many industries require compliance with one or more CIS
  benchmarks.

PCI::
  The https://www.pcisecuritystandards.org[Payment Card Industry Data Security Standard (PCI DSS)] must be followed by
  any organization that accepts, processes, stores, or transmits credit card information. Note that you can
  significantly reduce your PCI compliance burden by offloading the credit card processing to a third party, such as
  Stripe (see https://stripe.com/ie/guides/pci-compliance[Stripe's Guide to PCI Compliance] for more info).

HIPAA::
  Title II of the
  https://en.wikipedia.org/wiki/Health_Insurance_Portability_and_Accountability_Act[Health Insurance Portability and Accountability Act (HIPAA)]
  of 1996 establishes policies and procedures for maintaining the privacy and the security of protected health
  information (PHI). PHI includes a wide set of personally identifiable health and health-related data, including
  insurance and billing information, diagnosis data, clinical care data, and lab results. If you are a "covered entity"
  (i.e., a health plan, health care clearinghouse, or health care provider) or "business associate" (i.e., any vendor
  that works with health data, such as medical equipment companies, electronic health information exchanges, and data
  processing firms) that handles PHI, you are subject to HIPAA compliance.

SOC 2::
  https://www.aicpa.org/interestareas/frc/assuranceadvisoryservices/serviceorganization-smanagement.html[Service and Organization Controls 2 (SOC 2)]
  is a standard created by the American Institute of CPAs (AICPA) that defines rules and regulations for how service
  providers store customer data in the cloud. This applies to virtually all companies that use the cloud, especially
  SaaS providers.

ISO::
  The https://www.iso.org/[International Organization for Standardization (ISO)] developers a number of compliance
  standards that apply to companies using the cloud, including:
  https://www.iso.org/iso-9001-quality-management.html[ISO 9001], which is one of the most common compliance standards
  in the world, defines criteria for a quality management system (QMS);
  https://www.iso.org/isoiec-27001-information-security.html[ISO 27001], a family of standards that define requirements
  for information security systems;
  https://www.iso.org/standard/43757.html[ISO 27017], which defines guidelines for information security controls around
  cloud services;
  https://www.iso.org/standard/76559.html[ISO 27018], which defines guidelines for implementing measures to protect
  Personally Identifiable Information (PII) in the cloud. Many companies require their vendors and partners to meet one
  or more of these ISO standards.

GDPR::
  https://ec.europa.eu/commission/priorities/justice-and-fundamental-rights/data-protection/2018-reform-eu-data-protection-rules_en[General Data Protection Regulation (GDPR)]
  defines regulations for processing of personal data relating to individuals in the EU. It applies to all companies
  that are either located in the EU or do business in the EU.

=== What you'll learn in this guide

This guide consists of four main sections:

<<core_concepts>>::
  An overview of the core concepts you need to understand to achieve compliance, including a look into the various
  compliance standards (e.g., CIIS, PCI, HIPAA, SOC 2, ISO, GDPR), shared responsibility principle, PII, PHI, technical
  safeguards, process safeguards, audits, authentication, authorization, network security, server hardening, and more.

<<production_grade_design>>::
  An overview of how to meet compliance requirements on AWS and GCP in a way that you can rely on in production. To get
  a sense of what production-grade means, check out <<production_grade_infra_checklist>>.

<<deployment_walkthrough>>::
  A step-by-step guide to configuring AWS and GCP for compliance using code from the Gruntwork Service Catalog.

<<next_steps>>::
  What to do after you've finished your compliance work.

Feel free to read the guide from start to finish or skip around to whatever part interests you!

[[core_concepts]]
== Core concepts

[IMPORTANT]
====
At Gruntwork, we've helped many companies achieve compliance on AWS and GCP, and we're actively working on turning
what we learned along the way into public guides. This part of the guide is still a work in progress and will be
available soon.

Don't want to wait? link:/contact[Contact us] and we'll work directly with your company to help you meet your
compliance requirements on AWS and GCP.
====

=== Compliance basics

_Coming soon!_

=== CIS benchmarks

_Coming soon!_

=== PCI DSS

_Coming soon!_

=== HIPAA

_Coming soon!_

=== SOC 2

_Coming soon!_

=== ISO 9001

_Coming soon!_

=== ISO 27001

_Coming soon!_

=== ISO 27017

_Coming soon!_

=== ISO 27018

_Coming soon!_

=== GDPR

_Coming soon!_

=== Shared responsibility principle

_Coming soon!_

=== PII and PHI

_Coming soon!_

=== Technical safeguards vs process safeguards

_Coming soon!_

=== Audits and certifications

_Coming soon!_

=== Authentication and authorization

_Coming soon!_

=== Network security

_Coming soon!_

=== End-to-end encryption

_Coming soon!_

=== Data storage

_Coming soon!_

=== Server hardening

_Coming soon!_

=== Intrusion detection, prevention

_Coming soon!_

=== Monitoring

_Coming soon!_

=== Logging

_Coming soon!_

=== Testing

_Coming soon!_

=== Cloud service compatibility

_Coming soon!_

=== Vulnerability management

_Coming soon!_


[[production_grade_design]]
== Production-grade design

[IMPORTANT]
====
At Gruntwork, we've helped many companies achieve compliance on AWS and GCP, and we're actively working on turning
what we learned along the way into public guides. This part of the guide is still a work in progress and will be
available soon.

Don't want to wait? link:/contact[Contact us] and we'll work directly with your company to help you meet your
compliance requirements on AWS and GCP.
====

=== Principal of least privilege

_Coming soon!_

=== Defense in depth

_Coming soon!_

=== Process & policy

_Coming soon!_

=== BAAs

_Coming soon!_

=== Configure your accounts and projects

_Coming soon!_

=== Disable ineligible services, regions, defaults

_Coming soon!_

=== Configure users and permissions (passwords, MFA SSO, IAM, IAM roles)

_Coming soon!_

=== Configure your network topology (VPCs, route tables, subnets, security groups, NACLs, NAT, service mesh)

_Coming soon!_

=== Secrets management (KMS, Vault)

_Coming soon!_

=== Encrypt data in transit (TLS)

_Coming soon!_

=== Encrypt data at rest (encrypted volumes)

_Coming soon!_

=== Server hardening (CIS-hardened images, file integrity monitoring, anti-virus, ip-lockdown, fail2ban)

_Coming soon!_

=== Configure intrusion detection and prevention (Palo Alto Firewall, AWS GuardDuty, Wazuh, WAF)

_Coming soon!_

=== Set up monitoring

_Coming soon!_

=== Set up log aggregation

_Coming soon!_

=== Set up audit logging (CloudTrail, AWS Config, SSH auth)

_Coming soon!_

=== Configure alerts

_Coming soon!_

=== Incident response

_Coming soon!_

=== Configure VPN access

_Coming soon!_

=== Configure SSH access

_Coming soon!_

=== Set up regular testing

_Coming soon!_

=== Configure CI / CD

_Coming soon!_

=== Vulnerability disclosure

_Coming soon!_

=== Get audited and certified

_Coming soon!_


[[deployment_walkthrough]]
== Deployment walkthrough

[IMPORTANT]
====
At Gruntwork, we've helped many companies achieve compliance on AWS and GCP, and we're actively working on turning
what we learned along the way into public guides. This part of the guide is still a work in progress and will be
available soon.

Don't want to wait? link:/contact[Contact us] and we'll work directly with your company to help you meet your
compliance requirements on AWS and GCP.
====

Below are the modules and repos from the Gruntwork Service Catalog that are likely to be useful when trying to meet
compliance requirements. Full instructions are coming soon! In the meantime, check each module's documentation for
details.

IMPORTANT: You must be a https://gruntwork.io/[Gruntwork subscriber] to access most of these modules and repos.

https://github.com/gruntwork-io/module-vpc[module-vpc]::
  Deploy and manage your network topology on AWS, including VPCs, subnets, route tables, NAT Gateways, and NACLs. See
  <<production_grade_vpc_aws>> for more information.

https://github.com/hashicorp/terraform-aws-vault/[terraform-aws-vault]::
  A set of modules for running HashiCorp Vault, a highly-available, distributed system that can be used for secrets
  management and encryption.

https://github.com/gruntwork-io/gruntkms[gruntkms]::
  A CLI utility that makes it easy to encrypt and decrypt data with KMS. Particularly useful for encrypting and
  decrypting secrets in config files.

https://github.com/gruntwork-io/module-security/tree/master/modules/kms-master-key[kms-master-key]::
  Create a new Customer Master Key (CMK) in KMS, plus a Key Policy to manage who can use and manage the CMK.

https://github.com/gruntwork-io/cis-compliance-aws[cis-compliance-aws]::
  Modules and utilities for compliance with the CIS AWS Foundations Benchmark

https://github.com/gruntwork-io/module-security/tree/master/modules/cloudtrail[cloudtrail]::
  Deploy AWS CloudTrail, a service for logging every API call made against your AWS account.

https://github.com/gruntwork-io/module-security/tree/master/modules/aws-config[aws-config]::
  Deploy AWS Config, a service that allows you to assess, audit, and evaluate the configurations of your AWS resources.

https://github.com/gruntwork-io/module-security/tree/master/modules/auto-update[auto-update]::
  Configure a Linux server to automatically install critical security updates every night.

https://github.com/gruntwork-io/module-security/tree/master/modules/fail2ban[fail2ban]::
  Configure a Linux server to automatically ban malicious ip addresses from connecting to the server via SSH using
  `fail2ban`.

https://github.com/gruntwork-io/module-security/tree/master/modules/ip-lockdown[ip-lockdown]::
  Lock down outgoing IP addresses on a Linux server so only specific OS users can access them. The main motivation is
  to lock down the EC2 instance metadata endpoint so it—and whatever IAM permissions it has—isn't accessible to every
  user on the OS.

https://github.com/gruntwork-io/module-security/tree/master/modules/iam-users[iam-users]::
  Create and manage IAM users as code, including adding them to IAM groups and creating passwords and access keys (both
  encrypted with a PGP key).

https://github.com/gruntwork-io/module-security/tree/master/modules/iam-groups[iam-groups]::
  Create a best-practices set of IAM groups in an AWS account.

https://github.com/gruntwork-io/module-security/tree/master/modules/cross-account-iam-roles[cross-account-iam-roles]::
  A set of IAM roles that allow IAM users to access specific permissions across multiple AWS accounts.

https://github.com/gruntwork-io/module-security/tree/master/modules/iam-user-password-policy[iam-user-password-policy]::
  Configure a best-practices password policy for an AWS account.

https://github.com/gruntwork-io/kubergrunt[kubergrunt]::
  A CLI tool for securely configuring Kubernetes and Helm, including managing kubectl authentication for EKS, TLS
  certificates for helm, and TLS certificates for Kubernetes Secrets.

https://github.com/gruntwork-io/module-aws-monitoring/[module-aws-monitoring]::
  Define and manage CloudWatch metrics and alarms as code. Configure log aggregation with CloudWatch Logs.

https://github.com/gruntwork-io/module-ci[module-ci]::
  Modules for configuring CI / CD workflows.

https://github.com/gruntwork-io/module-security/tree/master/modules/ssh-grunt[ssh-grunt]::
  Manage SSH access to your EC2 Instances via an Identity Provider such as IAM.

https://github.com/gruntwork-io/package-openvpn[package-openvpn]::
  Run a secure OpenVPN server as a "bastion host," so all your other servers can be in private subnets that are not
  directly accessible from the public Internet.

https://github.com/gruntwork-io/package-kafka/tree/master/modules/generate-key-stores[generate-key-stores]::
  A script that can be used to generate key stores and trust stores, which are how many JVM apps store and manage
  TLS certificates.

[[next_steps]]
== Next steps

TODO
